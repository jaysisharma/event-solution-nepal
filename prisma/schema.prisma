generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model AdminUser {
  id        String   @id @default(uuid())
  username  String   @unique
  password  String   
  createdAt DateTime @default(now())
}

model Event {
  id        Int      @id @default(autoincrement())
  title     String
  date      String   
  month     String
  year      String   @default("2025")
  eventDate DateTime?
  location  String
  time      String
  image     String
  status    String   @default("UPCOMING") // UPCOMING, COMPLETED
  organizer String?
  managedBy String?
  description String?
  isFeatured Boolean @default(false)
  ticketTemplate String?  // URL to clean ticket image
  ticketConfig   String?  // JSON string for field positions/styles
  ticketPrice    String   @default("0")
  ticketTypes    String?  // JSON string for multiple ticket types
  formConfig     String?  // JSON string for form configuration
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model Partner {
  id        Int      @id @default(autoincrement())
  name      String
  image     String?
  order     Int      @default(0) 
  createdAt DateTime @default(now())
}

model WorkProject {
  id          Int      @id @default(autoincrement())
  title       String
  category    String
  year        String
  images      String   // Stored as JSON string of array
  isFeatured  Boolean  @default(false)
  order       Int      @default(0)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}

model Service {
  id          Int      @id @default(autoincrement())
  title       String
  description String
  image       String
  tags        String   // Stored as JSON string or comma-separated
  order       Int      @default(0)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}

model FAQ {
  id          Int      @id @default(autoincrement())
  question    String
  answer      String
  order       Int      @default(0)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}

model TeamMember {
  id          Int      @id @default(autoincrement())
  name        String
  role        String
  image       String
  order       Int      @default(0)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}

model GalleryItem {
  id          Int      @id @default(autoincrement())
  title       String
  category    String
  size        String   // 'normal', 'wide', 'tall', 'large'
  src         String
  date        DateTime @default(now())
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}

model RentalItem {
  id             Int      @id @default(autoincrement())
  title          String
  category       String
  price          String
  images         String   // Stored as JSON string of array
  size           String?  // General size description like "large", "standard"
  availableSizes String   // Stored as JSON string of array of string (Legacy/Simplified)
  variants       String?  // Stored as JSON string of array of objects { size, image }
  order          Int      @default(0)
  createdAt      DateTime @default(now())
  updatedAt      DateTime @updatedAt
}

model Testimonial {
  id        Int      @id @default(autoincrement())
  name      String
  role      String
  quote     String
  avatar    String?
  rating    Int      @default(5)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model HeroSlide {
  id        Int      @id @default(autoincrement())
  image     String
  label     String
  title     String
  order     Int      @default(0)
  
  // Per-Slide Stats
  rating        String   @default("4.9")
  ratingLabel   String   @default("Average Rating")
  ratingIcon    String   @default("Star") // Star, Heart, Trophy
  capacity      String   @default("Handling events up to 10k guests.")
  capacityLabel String   @default("Capacity")
  capacityIcon  String   @default("Users") // Users, Globe, Building
  showStats     Boolean  @default(true)
  isFeatured    Boolean  @default(false)
  
  // New Fields
  status        String   @default("UPCOMING") // UPCOMING, COMPLETED
  eventDate     String?   // User-facing text (e.g. "Jan 15 - Jan 19, 2026")
  sortDate      DateTime? // Hidden field for actual sorting logic

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model HeroSettings {
  id            Int      @id @default(autoincrement())
  rating        String   @default("4.9")
  ratingLabel   String   @default("Average Rating")
  capacity      String   @default("Handling events up to 10k guests.")
  capacityLabel String   @default("Capacity")
  
  // Text Content
  tagline           String @default("Be a guest at your own event")
  headingPrefix     String @default("Events that")
  headingHighlight1 String @default("Inspire")
  headingHighlight2 String @default("Delight")
  subtext           String @default("Founded in 2014 A.D , Event Solution Nepal has been creating meaningful and memorable events for over a decade bringing your vision to life with care, creativity, and professionalism.")
  
  updatedAt     DateTime @updatedAt
}

model TimelineMemory {
  id        Int      @id @default(autoincrement())
  image     String
  alt       String
  year      String
  category  String   @default("General")
  size      String   @default("normal")
  order     Int      @default(0)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model SiteSettings {
  id             Int      @id @default(autoincrement())
  whatsappNumber String   @default("9779851336342")
  contactEmail   String   @default("info@eventsolutionnepal.com.np")
  contactAddress String   @default("Jwagal, Lalitpur, Nepal")
  updatedAt      DateTime @updatedAt
}

model PageView {
  id        String   @id @default(uuid())
  path      String
  ipHash    String?
  userAgent String?
  country   String?
  createdAt DateTime @default(now())

  @@index([createdAt])
}


model TicketRequest {
  id           Int      @id @default(autoincrement())
  name         String
  number       String
  email        String
  address      String?
  title        String?
  organization String?
  website      String?
  eventName    String
  status       String   @default("PENDING") // PENDING, CONTACTED, RESOLVED
  
  // Payment Details
  paymentStatus String   @default("UNPAID")
  pidx          String?
  amount        Int?
  transactionId String?
  
  ticketDetails String? // JSON or text: "Adult x2, Child x1"

  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt
}

model AboutPage {
  id          Int      @id @default(autoincrement())
  title       String   @default("Our Story")
  subtitle    String   @default("Founded in 2014, Event Solution Nepal has been creating meaningful and memorable events.")
  description String   @default("We bring your vision to life with care, creativity, and professionalism.")
  image       String   @default("/images/about-hero.jpg")
  stats       String?  // JSON string for stats: e.g. { "years": "10+", "events": "500+" }
  updatedAt   DateTime @updatedAt
}
